{"mappings":"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","sources":["src/jquery.particleground.js"],"sourcesContent":["/*!\n * Particleground\n *\n * @author Jonathan Nicol - @mrjnicol\n * @version 1.1.0\n * @description Creates a canvas based particle system background\n *\n * Inspired by http://requestlab.fr/ and http://disruptivebydesign.com/\n */\n\n;(function(window, document) {\n  \"use strict\";\n  var pluginName = 'particleground';\n\n  // http://youmightnotneedjquery.com/#deep_extend\n  function extend(out) {\n    out = out || {};\n    for (var i = 1; i < arguments.length; i++) {\n      var obj = arguments[i];\n      if (!obj) continue;\n      for (var key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          if (typeof obj[key] === 'object')\n            deepExtend(out[key], obj[key]);\n          else\n            out[key] = obj[key];\n        }\n      }\n    }\n    return out;\n  };\n\n  var $ = window.jQuery;\n\n  function Plugin(element, options) {\n    var canvasSupport = !!document.createElement('canvas').getContext;\n    var canvas;\n    var ctx;\n    var particles = [];\n    var raf;\n    var mouseX = 0;\n    var mouseY = 0;\n    var winW;\n    var winH;\n    var desktop = !navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|BB10|mobi|tablet|opera mini|nexus 7)/i);\n    var orientationSupport = !!window.DeviceOrientationEvent;\n    var tiltX = 0;\n    var pointerX;\n    var pointerY;\n    var tiltY = 0;\n    var paused = false;\n\n    options = extend({}, window[pluginName].defaults, options);\n\n    /**\n     * Init\n     */\n    function init() {\n      if (!canvasSupport) { return; }\n\n      //Create canvas\n      canvas = document.createElement('canvas');\n      canvas.className = 'pg-canvas';\n      canvas.style.display = 'block';\n      element.insertBefore(canvas, element.firstChild);\n      ctx = canvas.getContext('2d');\n      styleCanvas();\n\n      // Create particles\n      var numParticles = Math.round((canvas.width * canvas.height) / options.density);\n      for (var i = 0; i < numParticles; i++) {\n        var p = new Particle();\n        p.setStackPos(i);\n        particles.push(p);\n      };\n\n      window.addEventListener('resize', function() {\n        resizeHandler();\n      }, false);\n\n      document.addEventListener('mousemove', function(e) {\n        mouseX = e.pageX;\n        mouseY = e.pageY;\n      }, false);\n\n      if (orientationSupport && !desktop) {\n        window.addEventListener('deviceorientation', function () {\n          // Contrain tilt range to [-30,30]\n          tiltY = Math.min(Math.max(-event.beta, -30), 30);\n          tiltX = Math.min(Math.max(-event.gamma, -30), 30);\n        }, true);\n      }\n\n      draw();\n      hook('onInit');\n    }\n\n    /**\n     * Style the canvas\n     */\n    function styleCanvas() {\n      canvas.width = element.offsetWidth;\n      canvas.height = element.offsetHeight;\n      ctx.fillStyle = options.dotColor;\n      ctx.strokeStyle = options.lineColor;\n      ctx.lineWidth = options.lineWidth;\n    }\n\n    /**\n     * Draw particles\n     */\n    function draw() {\n      if (!canvasSupport) { return; }\n\n      winW = window.innerWidth;\n      winH = window.innerHeight;\n\n      // Wipe canvas\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n      // Update particle positions\n      for (var i = 0; i < particles.length; i++) {\n        particles[i].updatePosition();\n      };\n      // Draw particles\n      for (var i = 0; i < particles.length; i++) {\n        particles[i].draw();\n      };\n\n      // Call this function next time screen is redrawn\n      if (!paused) {\n        raf = requestAnimationFrame(draw);\n      }\n    }\n\n    /**\n     * Add/remove particles.\n     */\n    function resizeHandler() {\n      // Resize the canvas\n      styleCanvas();\n\n      var elWidth = element.offsetWidth;\n      var elHeight = element.offsetHeight;\n\n      // Remove particles that are outside the canvas\n      for (var i = particles.length - 1; i >= 0; i--) {\n        if (particles[i].position.x > elWidth || particles[i].position.y > elHeight) {\n          particles.splice(i, 1);\n        }\n      };\n\n      // Adjust particle density\n      var numParticles = Math.round((canvas.width * canvas.height) / options.density);\n      if (numParticles > particles.length) {\n        while (numParticles > particles.length) {\n          var p = new Particle();\n          particles.push(p);\n        }\n      } else if (numParticles < particles.length) {\n        particles.splice(numParticles);\n      }\n\n      // Re-index particles\n      for (i = particles.length - 1; i >= 0; i--) {\n        particles[i].setStackPos(i);\n      };\n    }\n\n    /**\n     * Pause particle system\n     */\n    function pause() {\n      paused = true;\n    }\n\n    /**\n     * Start particle system\n     */\n    function start() {\n      paused = false;\n      draw();\n    }\n\n    /**\n     * Particle\n     */\n    function Particle() {\n      this.stackPos;\n      this.active = true;\n      this.layer = Math.ceil(Math.random() * 3);\n      this.parallaxOffsetX = 0;\n      this.parallaxOffsetY = 0;\n      // Initial particle position\n      this.position = {\n        x: Math.ceil(Math.random() * canvas.width),\n        y: Math.ceil(Math.random() * canvas.height)\n      }\n      // Random particle speed, within min and max values\n      this.speed = {}\n      switch (options.directionX) {\n        case 'left':\n          this.speed.x = +(-options.maxSpeedX + (Math.random() * options.maxSpeedX) - options.minSpeedX).toFixed(2);\n          break;\n        case 'right':\n          this.speed.x = +((Math.random() * options.maxSpeedX) + options.minSpeedX).toFixed(2);\n          break;\n        default:\n          this.speed.x = +((-options.maxSpeedX / 2) + (Math.random() * options.maxSpeedX)).toFixed(2);\n          this.speed.x += this.speed.x > 0 ? options.minSpeedX : -options.minSpeedX;\n          break;\n      }\n      switch (options.directionY) {\n        case 'up':\n          this.speed.y = +(-options.maxSpeedY + (Math.random() * options.maxSpeedY) - options.minSpeedY).toFixed(2);\n          break;\n        case 'down':\n          this.speed.y = +((Math.random() * options.maxSpeedY) + options.minSpeedY).toFixed(2);\n          break;\n        default:\n          this.speed.y = +((-options.maxSpeedY / 2) + (Math.random() * options.maxSpeedY)).toFixed(2);\n          this.speed.x += this.speed.y > 0 ? options.minSpeedY : -options.minSpeedY;\n          break;\n      }\n    }\n\n    /**\n     * Draw particle\n     */\n    Particle.prototype.draw = function() {\n      // Draw circle\n      ctx.beginPath();\n      ctx.arc(this.position.x + this.parallaxOffsetX, this.position.y + this.parallaxOffsetY, options.particleRadius / 2, 0, Math.PI * 2, true);\n      ctx.closePath();\n      ctx.fill();\n\n      // Draw lines\n      ctx.beginPath();\n      // Iterate over all particles which are higher in the stack than this one\n      for (var i = particles.length - 1; i > this.stackPos; i--) {\n        var p2 = particles[i];\n\n        // Pythagorus theorum to get distance between two points\n        var a = this.position.x - p2.position.x\n        var b = this.position.y - p2.position.y\n        var dist = Math.sqrt((a * a) + (b * b)).toFixed(2);\n\n        // If the two particles are in proximity, join them\n        if (dist < options.proximity) {\n          ctx.moveTo(this.position.x + this.parallaxOffsetX, this.position.y + this.parallaxOffsetY);\n          if (options.curvedLines) {\n            ctx.quadraticCurveTo(Math.max(p2.position.x, p2.position.x), Math.min(p2.position.y, p2.position.y), p2.position.x + p2.parallaxOffsetX, p2.position.y + p2.parallaxOffsetY);\n          } else {\n            ctx.lineTo(p2.position.x + p2.parallaxOffsetX, p2.position.y + p2.parallaxOffsetY);\n          }\n        }\n      }\n      ctx.stroke();\n      ctx.closePath();\n    }\n\n    /**\n     * update particle position\n     */\n    Particle.prototype.updatePosition = function() {\n      if (options.parallax) {\n        if (orientationSupport && !desktop) {\n          // Map tiltX range [-30,30] to range [0,winW]\n          var ratioX = (winW - 0) / (30 - -30);\n          pointerX = (tiltX - -30) * ratioX + 0;\n          // Map tiltY range [-30,30] to range [0,winH]\n          var ratioY = (winH - 0) / (30 - -30);\n          pointerY = (tiltY - -30) * ratioY + 0;\n        } else {\n          pointerX = mouseX;\n          pointerY = mouseY;\n        }\n        // Calculate parallax offsets\n        this.parallaxTargX = (pointerX - (winW / 2)) / (options.parallaxMultiplier * this.layer);\n        this.parallaxOffsetX += (this.parallaxTargX - this.parallaxOffsetX) / 10; // Easing equation\n        this.parallaxTargY = (pointerY - (winH / 2)) / (options.parallaxMultiplier * this.layer);\n        this.parallaxOffsetY += (this.parallaxTargY - this.parallaxOffsetY) / 10; // Easing equation\n      }\n\n      var elWidth = element.offsetWidth;\n      var elHeight = element.offsetHeight;\n\n      switch (options.directionX) {\n        case 'left':\n          if (this.position.x + this.speed.x + this.parallaxOffsetX < 0) {\n            this.position.x = elWidth - this.parallaxOffsetX;\n          }\n          break;\n        case 'right':\n          if (this.position.x + this.speed.x + this.parallaxOffsetX > elWidth) {\n            this.position.x = 0 - this.parallaxOffsetX;\n          }\n          break;\n        default:\n          // If particle has reached edge of canvas, reverse its direction\n          if (this.position.x + this.speed.x + this.parallaxOffsetX > elWidth || this.position.x + this.speed.x + this.parallaxOffsetX < 0) {\n            this.speed.x = -this.speed.x;\n          }\n          break;\n      }\n\n      switch (options.directionY) {\n        case 'up':\n          if (this.position.y + this.speed.y + this.parallaxOffsetY < 0) {\n            this.position.y = elHeight - this.parallaxOffsetY;\n          }\n          break;\n        case 'down':\n          if (this.position.y + this.speed.y + this.parallaxOffsetY > elHeight) {\n            this.position.y = 0 - this.parallaxOffsetY;\n          }\n          break;\n        default:\n          // If particle has reached edge of canvas, reverse its direction\n          if (this.position.y + this.speed.y + this.parallaxOffsetY > elHeight || this.position.y + this.speed.y + this.parallaxOffsetY < 0) {\n            this.speed.y = -this.speed.y;\n          }\n          break;\n      }\n\n      // Move particle\n      this.position.x += this.speed.x;\n      this.position.y += this.speed.y;\n    }\n\n    /**\n     * Setter: particle stacking position\n     */\n    Particle.prototype.setStackPos = function(i) {\n      this.stackPos = i;\n    }\n\n    function option (key, val) {\n      if (val) {\n        options[key] = val;\n      } else {\n        return options[key];\n      }\n    }\n\n    function destroy() {\n      console.log('destroy');\n      canvas.parentNode.removeChild(canvas);\n      hook('onDestroy');\n      if ($) {\n        $(element).removeData('plugin_' + pluginName);\n      }\n    }\n\n    function hook(hookName) {\n      if (options[hookName] !== undefined) {\n        options[hookName].call(element);\n      }\n    }\n\n    init();\n\n    return {\n      option: option,\n      destroy: destroy,\n      start: start,\n      pause: pause\n    };\n  }\n\n  window[pluginName] = function(elem, options) {\n    return new Plugin(elem, options);\n  };\n\n  window[pluginName].defaults = {\n    minSpeedX: 0.1,\n    maxSpeedX: 0.7,\n    minSpeedY: 0.1,\n    maxSpeedY: 0.7,\n    directionX: 'center', // 'center', 'left' or 'right'. 'center' = dots bounce off edges\n    directionY: 'center', // 'center', 'up' or 'down'. 'center' = dots bounce off edges\n    density: 10000, // How many particles will be generated: one particle every n pixels\n    dotColor: '#666666',\n    lineColor: '#666666',\n    particleRadius: 7, // Dot size\n    lineWidth: 1,\n    curvedLines: false,\n    proximity: 100, // How close two dots need to be before they join\n    parallax: true,\n    parallaxMultiplier: 5, // The lower the number, the more extreme the parallax effect\n    onInit: function() {},\n    onDestroy: function() {}\n  };\n\n  // nothing wrong with hooking into jQuery if it's there...\n  if ($) {\n    $.fn[pluginName] = function(options) {\n      if (typeof arguments[0] === 'string') {\n        var methodName = arguments[0];\n        var args = Array.prototype.slice.call(arguments, 1);\n        var returnVal;\n        this.each(function() {\n          if ($.data(this, 'plugin_' + pluginName) && typeof $.data(this, 'plugin_' + pluginName)[methodName] === 'function') {\n            returnVal = $.data(this, 'plugin_' + pluginName)[methodName].apply(this, args);\n          }\n        });\n        if (returnVal !== undefined){\n          return returnVal;\n        } else {\n          return this;\n        }\n      } else if (typeof options === \"object\" || !options) {\n        return this.each(function() {\n          if (!$.data(this, 'plugin_' + pluginName)) {\n            $.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n          }\n        });\n      }\n    };\n  }\n\n})(window, document);\n\n/**\n * requestAnimationFrame polyfill by Erik Möller. fixes from Paul Irish and Tino Zijdel\n * @see: http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n * @see: http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n * @license: MIT license\n */\n(function() {\n    var lastTime = 0;\n    var vendors = ['ms', 'moz', 'webkit', 'o'];\n    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n      window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];\n      window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame']\n                                 || window[vendors[x]+'CancelRequestAnimationFrame'];\n    }\n\n    if (!window.requestAnimationFrame)\n      window.requestAnimationFrame = function(callback, element) {\n        var currTime = new Date().getTime();\n        var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n        var id = window.setTimeout(function() { callback(currTime + timeToCall); },\n          timeToCall);\n        lastTime = currTime + timeToCall;\n        return id;\n      };\n\n    if (!window.cancelAnimationFrame)\n      window.cancelAnimationFrame = function(id) {\n        clearTimeout(id);\n      };\n}());\n"],"names":["window","document","pluginName","$","jQuery","Plugin","element","options","canvas","ctx","winW","winH","pointerX","pointerY","canvasSupport","createElement","getContext","particles","mouseX","mouseY","desktop","navigator","userAgent","match","orientationSupport","DeviceOrientationEvent","tiltX","tiltY","paused","styleCanvas","width","offsetWidth","height","offsetHeight","fillStyle","dotColor","strokeStyle","lineColor","lineWidth","draw","innerWidth","innerHeight","clearRect","i","length","updatePosition","requestAnimationFrame","Particle","this","stackPos","active","layer","Math","ceil","random","parallaxOffsetX","parallaxOffsetY","position","x","y","speed","directionX","maxSpeedX","minSpeedX","toFixed","directionY","maxSpeedY","minSpeedY","hook","hookName","undefined","call","out","arguments","obj","key","hasOwnProperty","deepExtend","extend","defaults","prototype","beginPath","arc","particleRadius","PI","closePath","fill","p2","a","b","sqrt","proximity","moveTo","curvedLines","quadraticCurveTo","max","min","lineTo","stroke","parallax","parallaxTargX","parallaxMultiplier","parallaxTargY","elWidth","elHeight","setStackPos","className","style","display","insertBefore","firstChild","numParticles","round","density","p","push","addEventListener","splice","resizeHandler","e","pageX","pageY","event","beta","gamma","init","option","val","destroy","console","log","parentNode","removeChild","removeData","start","pause","elem","onInit","onDestroy","fn","returnVal","methodName","args","Array","slice","each","data","apply","lastTime","vendors","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","id","setTimeout","clearTimeout"],"version":3,"file":"index.9818aadc.js.map"}